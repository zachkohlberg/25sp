<!DOCTYPE HTML>
<html lang="en" class="navy sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Project 5: Refactoring - SER120 Projects</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "navy";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('navy')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">SER120 Projects</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="project-5-refactoring"><a class="header" href="#project-5-refactoring">Project 5: Refactoring</a></h1>
<p>For this project, you'll be improving the structure of an existing program and
then making a few changes that take advantage of the new and improved code.</p>
<h2 id="tasks"><a class="header" href="#tasks">Tasks</a></h2>
<h3 id="task-1-refactor"><a class="header" href="#task-1-refactor">Task 1: Refactor</a></h3>
<p>Download and run the following program:</p>
<p><a href="./project5/zip/starter.zip">Starter Code</a></p>
<p>Clicking on the buttons should create balls with various properties. Some of
them will respond to mouse input (draggable, moving, splitting), and some of
them will act on their own (moving, shiny, splitting).</p>
<p>This program works, but the inheritance hierarchy used for the different types
of balls is not very flexible. Your job is to replace this with a more versatile
design using composition and an interface.</p>
<p>The current design is summarized by the following class diagram:</p>
<p><img src="./project5/diagrams/before.png" alt="class diagram for inheritance design" /></p>
<p>Note the use of inheritance to create different types of balls. The problem with
this design is that we cannot easily combine properties from different branches
of that hierarchy. For example, what if we wanted a shiny ball with an outline
that also moved and split when clicked? We can't inherit from <code>ShinyBall</code>,
<code>OutlineBall</code>, and <code>SplittingBall</code> at the same time, so we would have to copy a
lot of the code to create our new class. As a good software engineer, you
dislike code duplication and would rather not do this.</p>
<p>Our solution is to stop using inheritance altogether. Here is our new design:</p>
<p><img src="./project5/diagrams/after.png" alt="class diagram for composition design" /></p>
<p>In this design, the <code>Ball</code> class has a list of components that can modify its
behavior. These components implement the vaguely-named <code>Component</code> interface,
which declares a set of methods used to interact with the ball. Each of the
<code>Ball</code> subclasses from the previous design now implement the <code>Component</code>
interface instead of extending the <code>Ball</code> class.</p>
<p>The advantage of this new design is that we can mix and match components without
the restrictions imposed on us by the old inheritance design. We can still
create all the same types of balls we had before, but now we can create new
variations without even writing a new class:</p>
<pre><code class="language-java">// Creating a shiny ball with the old design:
scene.getActions().addToScene(new ShinyBall(scene.getActions()))

// Creating a shiny ball with the new design:
scene.getActions().addToScene(new Ball(scene.getActions(), new Shiny()))

// Creating a shiny, outlined, moving, and splitting ball with the old design:
// oops, can't do that!

// Creating a shiny, outlined, moving, and splitting ball with the new design:
scene.getActions().addToScene(new Ball(scene.getActions(), new Shiny(),
        new Outline(), new Moving(), new Splitting()))
</code></pre>
<p>Now that you're sold on the new design, it's time to make it! I've provided the
updated <code>Ball</code> class and its <code>Component</code> interface below, but you need to
convert each of the <code>Ball</code> subclasses (<code>ShinyBall</code>, <code>MovingBall</code>, etc.) into
their component counterparts (<code>Shiny</code>, <code>Moving</code>, etc.). You'll also need to
update the buttons in your <code>Main</code> class to properly create their ball variants
using the new system. It's a minor change, and the previous example for a shiny
ball should help you.</p>
<p><a href="./project5/zip/updated.zip">Updated Code</a></p>
<p>When you're finished with this task, the program should work exactly as it did
before. That may not be a very satisfying milestone, so try making a button that
spawns a new ball variant, like the shiny-outline-moving-splitting ball. Some
combinations may not work well together (such as Draggable and Moving), but you
can now create many variations that didn't previously exist without adding more
<code>Ball</code> subclasses or new components.</p>
<p>Note: your code must work with the original <code>Scene.java</code>, the new
<code>Component.java</code>, and the new <code>Ball.java</code>. Do not modify these files during your
update. You should only have to make minor changes to <code>Main.java</code> to update the
buttons, and more substantial changes to <code>DraggableBall.java</code>,
<code>MovingBall.java</code>, <code>OutlineBall.java</code>, <code>ShinyBall.java</code>, and
<code>SplittingBall.java</code> (including renaming them) to convert them into components.</p>
<h3 id="task-2-new-component"><a class="header" href="#task-2-new-component">Task 2: New Component</a></h3>
<p>Create a new component that affects the behavior of a ball in some way. For
example, you could make the ball:</p>
<ul>
<li>gradually shrink, then remove itself from the scene when the radius reaches
zero</li>
<li>move in a circular pattern</li>
<li>change color when clicked</li>
</ul>
<p>Once you've made your new component, add two new buttons to the program. These
buttons must spawn balls with your component and at least one other component.</p>
<h3 id="task-3-reflection"><a class="header" href="#task-3-reflection">Task 3: Reflection</a></h3>
<p>This assignment is not meant to teach you that inheritance is bad. However, it
does demonstrate a limitation of inheritance and how composition with interfaces
can produce more flexible code. Inheritance and composition are tools; they are
good at solving some problems and bad at solving other problems. You will rarely
find yourself in a situation where one option is clearly superior to the other
in every way. You must instead think about the trade-offs of each option and how
they apply to the code you are writing.</p>
<p>Can you think of any downsides to the new composition-based approach you coded
in the first task? This assignment was designed to highlight some advantages of
composition and some disadvantages or inheritance, but that doesn't mean there's
no advantage to choosing the inheritance design in this program.</p>
<p>If you're done with the program (tasks 1 and 2), then you can submit your code
on Blackboard. Make sure you include all of the source files listed in the
<a href="#deliverables">deliverables</a> section. There's no writeup to complete this time,
but I still want you to think about what you've (hopefully) learned from this
exercise. To be clear: <em>you do not need to submit a reflection or writeup file
with your project for it to count as complete; I only need your code</em>. However,
if you do feel like writing and want some feedback from me, then you can include
a write-up answering some or all of the following questions:</p>
<ol>
<li>What advantage do you think the old inheritance design had over the new
composition design? I bet you can think of at least one that isn't "the
composition version required more code."</li>
<li>What's a piece of code you wrote for this assignment that you think is
particularly good or bad, and why do you think this?</li>
<li>Do you have any other questions or comments about the assignment or the work
you submitted?</li>
</ol>
<h2 id="deliverables"><a class="header" href="#deliverables">Deliverables</a></h2>
<ul>
<li>Your <code>Main.java</code>, <code>Draggable.java</code>, <code>Moving.java</code>, <code>Outline.java</code>,
<code>Shiny.java</code>, and <code>Splitting.java</code> files</li>
<li>The .java file for your new ball component</li>
<li>Any written material you created for task 3</li>
</ul>
<h2 id="submission"><a class="header" href="#submission">Submission</a></h2>
<p><strong>Before submitting this assignment, make sure you understand and abide by the
Academic Integrity policy in our syllabus. This is particularly important if you
received any assistance, made use of an LLM, or used resources that were not
provided in class.</strong></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="project4.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="project4.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
